<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“± Î£ÏÏƒÏ„Î·Î¼Î± Î Î±ÏÎ±Î³Î³ÎµÎ»Î¹ÏÎ½ Î¤ÎµÏÏˆÎ¹Ï‚ (SYNC)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 10px; }
        .container { max-width: 100%; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .header { background: #4CAF50; color: white; padding: 20px; text-align: center; }
        .menu-buttons { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 20px; background: #f5f5f5; }
        .menu-btn { background: white; border: none; border-radius: 12px; padding: 18px 15px; font-size: 15px; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 8px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); transition: all 0.2s; min-height: 90px; }
        .menu-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.15); }
        .menu-btn span { font-size: 28px; }
        .section { padding: 20px; display: none; }
        .section.active { display: block; }
        .back-btn, .save-btn { background: #f44336; color: white; border: none; padding: 14px 20px; border-radius: 10px; font-size: 16px; cursor: pointer; margin-top: 20px; width: 100%; font-weight: bold; }
        .save-btn { background: #4CAF50; }
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
        .input-group input, .input-group textarea, .input-group select { width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; }
        .order-item, .customer-item { background: #f9f9f9; border-left: 4px solid #4CAF50; padding: 18px; margin-bottom: 12px; border-radius: 10px; position: relative; }
        .customer-item { border-left-color: #2196F3; }
        .order-actions, .customer-actions { position: absolute; top: 15px; right: 15px; display: flex; gap: 8px; }
        .action-btn { background: #2196F3; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 13px; cursor: pointer; }
        .delete-btn { background: #f44336; }
        .edit-btn { background: #FF9800; }
        .sync-status { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px; padding: 20px; margin: 20px 0; text-align: center; }
        .sync-indicator { margin-top: 12px; font-size: 14px; padding: 10px 18px; border-radius: 25px; display: inline-block; font-weight: bold; }
        .sync-active { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .sync-inactive { background: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        .loading { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center; color: white; font-size: 20px; }
        @media (max-width: 480px) { .menu-buttons { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div style="text-align: center; background: white; padding: 30px; border-radius: 10px;">
            <div style="font-size: 40px; margin-bottom: 15px;">â³</div>
            <div style="font-weight: bold; color: #333;">Î Î±ÏÎ±ÎºÎ±Î»Ï Ï€ÎµÏÎ¹Î¼Î­Î½ÎµÏ„Îµ...</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ“± Î£Î¥Î£Î¤Î—ÎœÎ‘ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î©Î Î¤Î•Î¡Î¨Î™Î£</h1>
            <p id="current-date" style="margin: 10px 0; font-size: 14px;"></p>
            <button onclick="manualSyncNow()" style="background:#2196F3;color:white;border:none;padding:10px 20px;border-radius:25px;cursor:pointer;font-weight:bold;">
                ğŸ”„ Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£ÎœÎŸÎ£
            </button>
            <div id="sync-indicator" class="sync-indicator sync-inactive" style="margin-top: 10px;">
                ğŸ”´ Î‘Î½Î±Î¼Î¿Î½Î® ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î¿Ï
            </div>
        </div>
        
        <div id="main-menu" class="menu-buttons">
            <button class="menu-btn" onclick="showSection('new-order')"><span>â•</span>ÎÎ•Î‘ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘</button>
            <button class="menu-btn" onclick="showTodayOrders()"><span>ğŸ“…</span>Î£Î—ÎœÎ•Î¡Î™ÎÎ•Î£</button>
            <button class="menu-btn" onclick="showHistory()"><span>ğŸ“Š</span>Î™Î£Î¤ÎŸÎ¡Î™ÎšÎŸ</button>
            <button class="menu-btn" onclick="showSection('customers')"><span>ğŸ‘¥</span>Î Î•Î›Î‘Î¤Î•Î£</button>
            <button class="menu-btn" onclick="showSection('sync-info')"><span>âš™ï¸</span>Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£</button>
            <button class="menu-btn" onclick="exportToExcel()"><span>ğŸ“¥</span>Î•ÎÎ‘Î“Î©Î“Î—</button>
        </div>
        
        <!-- ÎÎ•Î‘ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘ -->
        <div id="new-order" class="section">
            <h2>â• ÎÎ•Î‘ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘</h2>
            <div class="input-group">
                <label>Î Î•Î›Î‘Î¤Î—Î£:</label>
                <input type="text" id="customer-name" placeholder="ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿">
            </div>
            <div class="input-group">
                <label>Î¤Î—Î›Î•Î¦Î©ÎÎŸ:</label>
                <input type="tel" id="customer-phone" placeholder="2101234567">
            </div>
            <div class="input-group">
                <label>Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘:</label>
                <textarea id="order-details" placeholder="Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®..." rows="4"></textarea>
            </div>
            <div class="input-group">
                <label>Î—ÎœÎ•Î¡ÎŸÎœÎ—ÎÎ™Î‘:</label>
                <input type="datetime-local" id="order-date">
            </div>
            <button class="save-btn" onclick="saveOrder()">ğŸ’¾ Î‘Î ÎŸÎ˜Î—ÎšÎ•Î¥Î£Î— Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘Î£</button>
            <button class="back-btn" onclick="showMainMenu()">â†©ï¸ Î Î™Î£Î© Î£Î¤ÎŸ ÎœÎ•ÎÎŸÎ¥</button>
        </div>
        
        <!-- Î£Î—ÎœÎ•Î¡Î™ÎÎ•Î£ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î•Î£ -->
        <div id="today-orders" class="section">
            <h2>ğŸ“… Î£Î—ÎœÎ•Î¡Î™ÎÎ•Î£ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î•Î£</h2>
            <div id="today-orders-list"></div>
            <button class="back-btn" onclick="showMainMenu()">â†©ï¸ Î Î™Î£Î© Î£Î¤ÎŸ ÎœÎ•ÎÎŸÎ¥</button>
        </div>
        
        <!-- Î™Î£Î¤ÎŸÎ¡Î™ÎšÎŸ -->
        <div id="history" class="section">
            <h2>ğŸ“Š Î™Î£Î¤ÎŸÎ¡Î™ÎšÎŸ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î©Î</h2>
            <div class="input-group">
                <select id="history-filter" onchange="filterHistory()" style="padding: 14px;">
                    <option value="all">ÎŒÎ»ÎµÏ‚ Î¿Î¹ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚</option>
                    <option value="today">Î£Î®Î¼ÎµÏÎ±</option>
                    <option value="week">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± 7 Î·Î¼Î­ÏÎµÏ‚</option>
                </select>
            </div>
            <div id="history-list"></div>
            <button class="back-btn" onclick="showMainMenu()">â†©ï¸ Î Î™Î£Î© Î£Î¤ÎŸ ÎœÎ•ÎÎŸÎ¥</button>
        </div>
        
        <!-- Î Î•Î›Î‘Î¤Î•Î£ -->
        <div id="customers" class="section">
            <h2>ğŸ‘¥ Î Î•Î›Î‘Î¤Î•Î£</h2>
            <div class="input-group">
                <input type="text" id="search-customer" placeholder="ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€ÎµÎ»Î¬Ï„Î·..." oninput="searchCustomers()">
            </div>
            <div id="customers-list"></div>
            <button class="save-btn" onclick="addNewCustomer()">â• Î Î¡ÎŸÎ£Î˜Î—ÎšÎ— Î Î•Î›Î‘Î¤Î—</button>
            <button class="back-btn" onclick="showMainMenu()">â†©ï¸ Î Î™Î£Î© Î£Î¤ÎŸ ÎœÎ•ÎÎŸÎ¥</button>
        </div>
        
        <!-- Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£ Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£ÎœÎŸÎ¥ -->
        <div id="sync-info" class="section">
            <h2>âš™ï¸ Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£ Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£ÎœÎŸÎ¥</h2>
            
            <div class="sync-status">
                <h3>ğŸ“Š ÎšÎ‘Î¤Î‘Î£Î¤Î‘Î£Î— Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£ÎœÎŸÎ¥</h3>
                <p id="sync-status-text" style="margin: 15px 0;">ğŸ”„ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½...</p>
                <p id="last-sync-time" style="color: #666;">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿Ï‚ ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼ÏŒÏ‚: Î Î¿Ï„Î­</p>
                <p id="data-counts" style="color: #666; margin-top: 10px;">Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚: 0 | Î ÎµÎ»Î¬Ï„ÎµÏ‚: 0</p>
                
                <div style="margin-top: 20px; background: #e8f4fd; padding: 15px; border-radius: 8px;">
                    <h4>âœ… Î£Î¥ÎÎ”Î•Î”Î•ÎœÎ•ÎÎŸ ÎœÎ•:</h4>
                    <p><strong>Google Sheet:</strong> artzilos-stack âœ…</p>
                    <p><strong>API Key:</strong> Î¡Ï…Î¸Î¼Î¹ÏƒÎ¼Î­Î½Î¿ âœ…</p>
                    <p><strong>GitHub:</strong> artzilos-stack âœ…</p>
                </div>
            </div>
            
            <div style="display: grid; gap: 10px; margin-top: 20px;">
                <button class="menu-btn" onclick="uploadToGoogleSheets()"><span>ğŸ“¤</span>Î‘ÎÎ•Î’Î‘Î£ÎœÎ‘ Î£Î¤ÎŸ GOOGLE SHEETS</button>
                <button class="menu-btn" onclick="downloadFromGoogleSheets()"><span>ğŸ“¥</span>ÎšÎ‘Î¤Î•Î’Î‘Î£ÎœÎ‘ Î‘Î ÎŸ GOOGLE SHEETS</button>
                <button class="menu-btn" onclick="testConnection()"><span>ğŸ”</span>Î”ÎŸÎšÎ™ÎœÎ— Î£Î¥ÎÎ”Î•Î£Î—Î£</button>
                <button class="menu-btn" onclick="clearAllData()" style="background: #ffebee;"><span>ğŸ—‘ï¸</span>ÎšÎ‘Î˜Î‘Î¡Î™Î£ÎœÎŸÎ£ Î”Î•Î”ÎŸÎœÎ•ÎÎ©Î</button>
            </div>
            
            <button class="back-btn" onclick="showMainMenu()">â†©ï¸ Î Î™Î£Î© Î£Î¤ÎŸ ÎœÎ•ÎÎŸÎ¥</button>
        </div>
    </div>

<script>
// ======================
// ğŸ“Š ÎšÎŸÎ™ÎÎ‘ Î”Î•Î”ÎŸÎœÎ•ÎÎ‘
// ======================
let orders = JSON.parse(localStorage.getItem('orders')) || [];
let customers = JSON.parse(localStorage.getItem('customers')) || [];
let lastSyncTime = localStorage.getItem('lastSyncTime') || 'Î Î¿Ï„Î­';

// ======================
// âš™ï¸ GOOGLE SHEETS CONFIG
// ======================
const GOOGLE_CONFIG = {
    SHEET_ID: '12gT2bkIemNOmSemD0u86d463XxylqpHnaN2d6C1xm_A',
    API_KEY: 'AIzaSyBJxjt0k1Yypj6P5s9vI8uq5y91YMoO8G8',
    SHEET_NAME: 'Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚'
};

// ======================
// ğŸš€ Î‘Î¡Î§Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—
// ======================
document.addEventListener('DOMContentLoaded', function() {
    // Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±
    document.getElementById('current-date').textContent = new Date().toLocaleDateString('el-GR', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
    
    // Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÏƒÏ…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎ· Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±Ï‚
    document.getElementById('order-date').value = new Date().toISOString().slice(0, 16);
    
    // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
    updateSyncStatus();
    
    // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ Ï€ÏÏÏ„Î· Ï†Î¿ÏÎ¬
    setTimeout(checkFirstTime, 1000);
    
    console.log('âœ… Î•Ï†Î±ÏÎ¼Î¿Î³Î® Î±ÏÏ‡Î¹ÎºÎ¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ');
    console.log('ğŸ“Š Google Sheet ID:', GOOGLE_CONFIG.SHEET_ID);
});

// ======================
// ğŸ“‹ Î’Î‘Î£Î™ÎšÎ•Î£ Î£Î¥ÎÎ‘Î¡Î¤Î—Î£Î•Î™Î£
// ======================
function showSection(sectionId) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById('main-menu').style.display = 'none';
    document.getElementById(sectionId).classList.add('active');
    
    // Î•Î¹Î´Î¹ÎºÎ® ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±
    switch(sectionId) {
        case 'today-orders': loadTodayOrders(); break;
        case 'history': loadHistory(); break;
        case 'customers': loadCustomers(); break;
        case 'sync-info': updateSyncStatus(); break;
    }
}

function showMainMenu() {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById('main-menu').style.display = 'grid';
}

function showLoading() {
    document.getElementById('loading').style.display = 'flex';
}

function hideLoading() {
    document.getElementById('loading').style.display = 'none';
}

function showNotification(message, type = 'info') {
    alert('ğŸ“¢ ' + message);
}

function updateSyncStatus() {
    const indicator = document.getElementById('sync-indicator');
    const statusText = document.getElementById('sync-status-text');
    const lastSync = document.getElementById('last-sync-time');
    const dataCounts = document.getElementById('data-counts');
    
    if(indicator) {
        indicator.innerHTML = 'ğŸŸ¢ <strong>Î£Î¥ÎÎ”Î•Î”Î•ÎœÎ•ÎÎŸ ÎœÎ• GOOGLE SHEETS</strong>';
        indicator.className = 'sync-indicator sync-active';
    }
    
    if(statusText) {
        statusText.innerHTML = 'ğŸŸ¢ <strong>Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£ÎœÎŸÎ£: Î•ÎÎ•Î¡Î“ÎŸÎ£</strong><br><small>Google Sheets: artzilos-stack</small>';
    }
    
    if(lastSync) {
        lastSync.textContent = `Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î¿Ï‚ ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼ÏŒÏ‚: ${lastSyncTime}`;
    }
    
    if(dataCounts) {
        dataCounts.textContent = `Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚: ${orders.length} | Î ÎµÎ»Î¬Ï„ÎµÏ‚: ${customers.length}`;
    }
}

function checkFirstTime() {
    if(orders.length === 0 && customers.length === 0) {
        showNotification('ğŸ‘‹ ÎšÎ±Î»ÏÏ‚ Î®ÏÎ¸Î±Ï„Îµ! Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎµÎ¯Î½Î±Î¹ ÏƒÏ…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î¿ Î¼Îµ Google Sheets Î³Î¹Î± ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼ÏŒ.');
    }
}

// ======================
// ğŸ’¾ Î‘Î ÎŸÎ˜Î—ÎšÎ•Î¥Î£Î— Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘Î£
// ======================
function saveOrder() {
    const customer = document.getElementById('customer-name').value.trim();
    const phone = document.getElementById('customer-phone').value.trim();
    const details = document.getElementById('order-details').value.trim();
    const date = document.getElementById('order-date').value;
    
    if(!customer || !details) {
        alert('Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ Î ÎµÎ»Î¬Ï„Î· ÎºÎ±Î¹ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±!');
        return;
    }
    
    showLoading();
    
    const order = {
        id: Date.now(),
        customer: customer,
        phone: phone,
        details: details,
        date: date || new Date().toISOString(),
        status: 'Î•ÎÎ•Î¡Î“Î—',
        created: new Date().toISOString(),
        synced: false
    };
    
    orders.push(order);
    
    // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï€ÎµÎ»Î¬Ï„Î· Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹
    if(!customers.some(c => c.name === customer)) {
        customers.push({
            id: Date.now(),
            name: customer,
            phone: phone,
            orders: 1
        });
    }
    
    // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î¿Ï€Î¹ÎºÎ¬
    localStorage.setItem('orders', JSON.stringify(orders));
    localStorage.setItem('customers', JSON.stringify(customers));
    
    // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï†ÏŒÏÎ¼Î±Ï‚
    document.getElementById('customer-name').value = '';
    document.getElementById('customer-phone').value = '';
    document.getElementById('order-details').value = '';
    document.getElementById('order-date').value = new Date().toISOString().slice(0, 16);
    
    hideLoading();
    
    // Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÏ„Î¿ Google Sheets
    setTimeout(() => {
        uploadToGoogleSheets();
    }, 1000);
    
    showNotification(`âœ… Î— Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ! (Î˜Î± ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÏ„ÎµÎ¯ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±)`);
    showMainMenu();
}

// ======================
// ğŸ“… Î£Î—ÎœÎ•Î¡Î™ÎÎ•Î£ Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î•Î£
// ======================
function showTodayOrders() {
    showSection('today-orders');
}

function loadTodayOrders() {
    const today = new Date().toLocaleDateString('el-GR');
    const todayOrders = orders.filter(order => 
        new Date(order.date).toLocaleDateString('el-GR') === today
    );
    
    const list = document.getElementById('today-orders-list');
    displayOrderList(todayOrders, list);
}

// ======================
// ğŸ“Š Î™Î£Î¤ÎŸÎ¡Î™ÎšÎŸ
// ======================
function showHistory() {
    showSection('history');
}

function loadHistory() {
    const list = document.getElementById('history-list');
    displayOrderList([...orders].sort((a,b) => new Date(b.date) - new Date(a.date)), list);
}

function filterHistory() {
    const filter = document.getElementById('history-filter').value;
    const list = document.getElementById('history-list');
    
    let filteredOrders = [...orders];
    
    if(filter === 'today') {
        const today = new Date().toLocaleDateString('el-GR');
        filteredOrders = orders.filter(order => 
            new Date(order.date).toLocaleDateString('el-GR') === today
        );
    } else if(filter === 'week') {
        const weekAgo = new Date();
        weekAgo.setDate(weekAgo.getDate() - 7);
        filteredOrders = orders.filter(order => 
            new Date(order.date) >= weekAgo
        );
    }
    
    displayOrderList(filteredOrders.sort((a,b) => new Date(b.date) - new Date(a.date)), list);
}

function displayOrderList(orderList, container) {
    container.innerHTML = '';
    
    if(orderList.length === 0) {
        container.innerHTML = '<p style="text-align:center;padding:30px;color:#666;">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚</p>';
        return;
    }
    
    orderList.forEach(order => {
        const div = document.createElement('div');
        div.className = 'order-item';
        
        div.innerHTML = `
            <div class="order-actions">
                <button class="action-btn delete-btn" onclick="deleteOrder(${order.id})">âŒ</button>
            </div>
            <h4>${order.customer}</h4>
            <p>ğŸ“ ${order.phone || 'Î§Ï‰ÏÎ¯Ï‚ Ï„Î·Î»Î­Ï†Ï‰Î½Î¿'}</p>
            <p>${order.details}</p>
            <small>ğŸ“… ${new Date(order.date).toLocaleString('el-GR')} | ${order.synced ? 'âœ… Î£Ï…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î­Î½Î¿' : 'ğŸ”„ Î¤Î¿Ï€Î¹ÎºÏŒ'}</small>
        `;
        
        container.appendChild(div);
    });
}

function deleteOrder(orderId) {
    if(!confirm('Î£Î¯Î³Î¿Ï…ÏÎ± Î¸Î­Î»ÎµÎ¹Ï‚ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÎ¹Ï‚ Î±Ï…Ï„Î® Ï„Î·Î½ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±;')) return;
    
    orders = orders.filter(o => o.id !== orderId);
    localStorage.setItem('orders', JSON.stringify(orders));
    
    showNotification('âœ… Î— Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ!');
    
    // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Î¿Î¸ÏŒÎ½Î·Ï‚
    if(document.getElementById('today-orders').classList.contains('active')) {
        loadTodayOrders();
    } else if(document.getElementById('history').classList.contains('active')) {
        loadHistory();
    }
    
    // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Google Sheets
    setTimeout(() => uploadToGoogleSheets(), 500);
}

// ======================
// ğŸ‘¥ Î Î•Î›Î‘Î¤Î•Î£
// ======================
function loadCustomers() {
    const list = document.getElementById('customers-list');
    list.innerHTML = '';
    
    if(customers.length === 0) {
        list.innerHTML = '<p style="text-align:center;padding:20px;color:#666;">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚</p>';
        return;
    }
    
    customers.forEach(customer => {
        const div = document.createElement('div');
        div.className = 'customer-item';
        
        const customerOrders = orders.filter(o => o.customer === customer.name).length;
        
        div.innerHTML = `
            <div class="customer-actions">
                <button class="action-btn delete-btn" onclick="deleteCustomer(${customer.id})">âŒ</button>
            </div>
            <h4>${customer.name}</h4>
            <p>ğŸ“ ${customer.phone || 'Î§Ï‰ÏÎ¯Ï‚ Ï„Î·Î»Î­Ï†Ï‰Î½Î¿'}</p>
            <p>ğŸ“¦ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚: ${customerOrders}</p>
        `;
        
        // Î•Ï€Î¹Î»Î¿Î³Î® Ï€ÎµÎ»Î¬Ï„Î· Î³Î¹Î± Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±
        div.addEventListener('click', function() {
            document.getElementById('customer-name').value = customer.name;
            document.getElementById('customer-phone').value = customer.phone || '';
            showSection('new-order');
        });
        
        list.appendChild(div);
    });
}

function searchCustomers() {
    const searchTerm = document.getElementById('search-customer').value.toLowerCase();
    const filtered = customers.filter(c => 
        c.name.toLowerCase().includes(searchTerm) ||
        (c.phone && c.phone.includes(searchTerm))
    );
    
    const list = document.getElementById('customers-list');
    list.innerHTML = '';
    
    filtered.forEach(customer => {
        const div = document.createElement('div');
        div.className = 'customer-item';
        
        const customerOrders = orders.filter(o => o.customer === customer.name).length;
        
        div.innerHTML = `
            <h4>${customer.name}</h4>
            <p>ğŸ“ ${customer.phone || 'Î§Ï‰ÏÎ¯Ï‚ Ï„Î·Î»Î­Ï†Ï‰Î½Î¿'}</p>
            <p>ğŸ“¦ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚: ${customerOrders}</p>
        `;
        
        list.appendChild(div);
    });
}

function addNewCustomer() {
    const name = prompt('ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿ Ï€ÎµÎ»Î¬Ï„Î·:');
    if(!name) return;
    
    const phone = prompt('Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:');
    
    customers.push({
        id: Date.now(),
        name: name,
        phone: phone,
        orders: 0
    });
    
    localStorage.setItem('customers', JSON.stringify(customers));
    loadCustomers();
    showNotification('âœ… ÎŸ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Ï€ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ!');
}

function deleteCustomer(customerId) {
    const customer = customers.find(c => c.id === customerId);
    if(!customer) return;
    
    if(!confirm(`Î£Î¯Î³Î¿Ï…ÏÎ± Î¸Î­Î»ÎµÎ¹Ï‚ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÎ¹Ï‚ Ï„Î¿Î½ Ï€ÎµÎ»Î¬Ï„Î· ${customer.name};`)) return;
    
    customers = customers.filter(c => c.id !== customerId);
    localStorage.setItem('customers', JSON.stringify(customers));
    loadCustomers();
    showNotification('âœ… ÎŸ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ!');
}

// ======================
// ğŸ”„ GOOGLE SHEETS SYNC
// ======================
async function uploadToGoogleSheets() {
    showLoading();
    
    try {
        // Î ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î±ÏƒÎ¯Î± Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
        const data = orders.map(order => [
            order.id,
            order.customer,
            order.phone || '',
            order.details,
            new Date(order.date).toLocaleString('el-GR'),
            order.status,
            new Date(order.created).toLocaleString('el-GR'),
            order.synced ? 'ÎÎ‘Î™' : 'ÎŸÎ§Î™'
        ]);
        
        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎµÏ€Î¹ÎºÎµÏ†Î±Î»Î¯Î´Ï‰Î½
        const headers = ['ID', 'Î Î•Î›Î‘Î¤Î—Î£', 'Î¤Î—Î›Î•Î¦Î©ÎÎŸ', 'Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘', 'Î—ÎœÎ•Î¡ÎŸÎœÎ—ÎÎ™Î‘', 'ÎšÎ‘Î¤Î‘Î£Î¤Î‘Î£Î—', 'Î”Î—ÎœÎ™ÎŸÎ¥Î¡Î“Î—Î˜Î—ÎšÎ•', 'Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£Î¤Î—ÎšÎ•'];
        data.unshift(headers);
        
        // Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÏ„Î¿ Google Sheets
        const response = await fetch(
            `https://sheets.googleapis.com/v4/spreadsheets/${GOOGLE_CONFIG.SHEET_ID}/values/Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚!A1:H1000?valueInputOption=RAW&key=${GOOGLE_CONFIG.API_KEY}`,
            {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ values: data })
            }
        );
        
        if(response.ok) {
            // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï‡ÏÏŒÎ½Î¿Ï… ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î¿Ï
            lastSyncTime = new Date().toLocaleString('el-GR');
            localStorage.setItem('lastSyncTime', lastSyncTime);
            
            // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
            orders.forEach(order => order.synced = true);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            updateSyncStatus();
            hideLoading();
            showNotification(`âœ… Î•Ï€Î¹Ï„Ï…Ï‡Î®Ï‚ ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼ÏŒÏ‚! Î‘Ï€Î¿ÏƒÏ„Î¬Î»Î¸Î·ÎºÎ±Î½ ${orders.length} Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚.`);
        } else {
            hideLoading();
            showNotification('âŒ Î£Ï†Î¬Î»Î¼Î± ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î¿Ï. Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î·Î½ ÏƒÏÎ½Î´ÎµÏƒÎ·.', 'error');
        }
    } catch(error) {
        hideLoading();
        showNotification('âŒ Î£Ï†Î¬Î»Î¼Î± Î´Î¹ÎºÏ„ÏÎ¿Ï…: ' + error.message, 'error');
    }
}

async function downloadFromGoogleSheets() {
    if(!confirm('Î˜Î­Î»ÎµÏ„Îµ Î½Î± Ï†Î¿ÏÏ„ÏÏƒÎµÏ„Îµ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ Ï„Î¿ Google Sheets;\nÎ‘Ï…Ï„ÏŒ Î¸Î± Î±Î½Ï„Î¹ÎºÎ±Ï„Î±ÏƒÏ„Î®ÏƒÎµÎ¹ Ï„Î± Ï„ÏÎ­Ï‡Î¿Î½Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±!')) return;
    
    showLoading();
    
    try {
        const response = await fetch(
            `https://sheets.googleapis.com/v4/spreadsheets/${GOOGLE_CONFIG.SHEET_ID}/values/Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚!A2:H?key=${GOOGLE_CONFIG.API_KEY}`
        );
        
        const data = await response.json();
        
        if(data.values) {
            // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï€Î±Î»Î¹ÏÎ½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
            orders = [];
            customers = [];
            
            // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î½Î­Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
            data.values.forEach(row => {
                if(row.length >= 7) {
                    const order = {
                        id: parseInt(row[0]) || Date.now(),
                        customer: row[1] || '',
                        phone: row[2] || '',
                        details: row[3] || '',
                        date: row[4] || new Date().toISOString(),
                        status: row[5] || 'Î•ÎÎ•Î¡Î“Î—',
                        created: row[6] || new Date().toISOString(),
                        synced: true
                    };
                    
                    orders.push(order);
                    
                    // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï€ÎµÎ»Î¬Ï„Î·
                    if(order.customer && !customers.some(c => c.name === order.customer)) {
                        customers.push({
                            id: Date.now(),
                            name: order.customer,
                            phone: order.phone,
                            orders: 1
                        });
                    }
                }
            });
            
            // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î¿Ï€Î¹ÎºÎ¬
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('customers', JSON.stringify(customers));
            
            // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï‡ÏÏŒÎ½Î¿Ï… ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î¿Ï
            lastSyncTime = new Date().toLocaleString('el-GR');
            localStorage.setItem('lastSyncTime', lastSyncTime);
            
            updateSyncStatus();
            hideLoading();
            showNotification(`âœ… Î¦Î¿ÏÏ„ÏÎ¸Î·ÎºÎ±Î½ ${orders.length} Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚ Î±Ï€ÏŒ Ï„Î¿ Google Sheets!`);
            
            // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Î¿Î¸ÏŒÎ½Î·Ï‚
            if(document.getElementById('today-orders').classList.contains('active')) {
                loadTodayOrders();
            } else if(document.getElementById('history').classList.contains('active')) {
                loadHistory();
            } else if(document.getElementById('customers').classList.contains('active')) {
                loadCustomers();
            }
        } else {
            hideLoading();
            showNotification('â„¹ï¸ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÏƒÏ„Î¿ Google Sheets.', 'info');
        }
    } catch(error) {
        hideLoading();
        showNotification('âŒ Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚: ' + error.message, 'error');
    }
}

async function testConnection() {
    showLoading();
    
    try {
        const response = await fetch(
            `https://sheets.googleapis.com/v4/spreadsheets/${GOOGLE_CONFIG.SHEET_ID}?key=${GOOGLE_CONFIG.API_KEY}`
        );
        
        if(response.ok) {
            hideLoading();
            showNotification('âœ… Î£ÏÎ½Î´ÎµÏƒÎ· ÎµÏ€Î¹Ï„Ï…Ï‡Î®Ï‚! Î¤Î¿ Google Sheets ÎµÎ¯Î½Î±Î¹ Î­Ï„Î¿Î¹Î¼Î¿.', 'success');
        } else {
            hideLoading();
            showNotification('âŒ Î£Ï†Î¬Î»Î¼Î± ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚. Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± credentials.', 'error');
        }
    } catch(error) {
        hideLoading();
        showNotification('âŒ Î£Ï†Î¬Î»Î¼Î± Î´Î¹ÎºÏ„ÏÎ¿Ï…. Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î·Î½ ÏƒÏÎ½Î´ÎµÏƒÎ·.', 'error');
    }
}

function manualSyncNow() {
    if(confirm('1. Î‘ÎÎ•Î’Î‘Î£ÎœÎ‘: Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® Ï„Ï‰Î½ Ï„Î¿Ï€Î¹ÎºÏÎ½ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¹ÏÎ½ ÏƒÏ„Î¿ Google Sheets\n\nÎ˜Î­Î»ÎµÏ„Îµ Î½Î± ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¯ÏƒÎµÏ„Îµ Ï„ÏÏÎ±;')) {
        uploadToGoogleSheets();
    }
}

// ======================
// ğŸ“¥ Î•ÎÎ‘Î“Î©Î“Î—
// ======================
function exportToExcel() {
    if(orders.length === 0) {
        alert('Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î³Î¹Î± ÎµÎ¾Î±Î³Ï‰Î³Î®!');
        return;
    }
    
    // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± CSV
    let csv = 'ID,Î Î•Î›Î‘Î¤Î—Î£,Î¤Î—Î›Î•Î¦Î©ÎÎŸ,Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘,Î—ÎœÎ•Î¡ÎŸÎœÎ—ÎÎ™Î‘,ÎšÎ‘Î¤Î‘Î£Î¤Î‘Î£Î—,Î”Î—ÎœÎ™ÎŸÎ¥Î¡Î“Î—Î˜Î—ÎšÎ•\n';
    
    orders.forEach(order => {
        csv += `"${order.id}","${order.customer}","${order.phone || ''}","${order.details}","${new Date(order.date).toLocaleString('el-GR')}","${order.status}","${new Date(order.created).toLocaleString('el-GR')}"\n`;
    });
    
    // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± blob ÎºÎ±Î¹ Î»Î®ÏˆÎ·
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚_${new Date().toISOString().slice(0,10)}.csv`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showNotification('âœ… Î¤Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÎµÎ¾Î®Ï‡Î¸Î·ÏƒÎ±Î½ ÏƒÎµ CSV!');
}

function clearAllData() {
    if(!confirm('âš ï¸ Î Î¡ÎŸÎ£ÎŸÎ§Î—! Î˜Î± Î´Î¹Î±Î³ÏÎ±Ï†Î¿ÏÎ½ ÎŸÎ›Î‘ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±.\n\nÎ‘Ï…Ï„Î® Î· ÎµÎ½Î­ÏÎ³ÎµÎ¹Î± Î´ÎµÎ½ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Î½Î±Î¹ÏÎµÎ¸ÎµÎ¯!\n\nÎ˜Î­Î»ÎµÏ„Îµ Î½Î± ÏƒÏ…Î½ÎµÏ‡Î¯ÏƒÎµÏ„Îµ;')) return;
    
    if(confirm('âš ï¸ Î¤Î•Î›Î™ÎšÎ— Î•Î Î™Î’Î•Î’Î‘Î™Î©Î£Î—:\nÎ˜Î± Î´Î¹Î±Î³ÏÎ±Ï†Î¿ÏÎ½ ÎŸÎ›Î•Î£ Î¿Î¹ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚ ÎºÎ±Î¹ Î¿Î¹ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚!\n\nÎ•Î™Î£Î‘Î™ Î£Î™Î“ÎŸÎ¥Î¡ÎŸÎ£;')) {
        orders = [];
        customers = [];
        localStorage.removeItem('orders');
        localStorage.removeItem('customers');
        localStorage.removeItem('lastSyncTime');
        
        showNotification('ğŸ—‘ï¸ ÎŒÎ»Î± Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎ±Î½!');
        showMainMenu();
    }
}

// ======================
// â° Î‘Î¥Î¤ÎŸÎœÎ‘Î¤ÎŸÎ£ Î£Î¥Î“Î§Î¡ÎŸÎÎ™Î£ÎœÎŸÎ£ ÎšÎ‘Î˜Î• 5 Î›Î•Î Î¤Î‘
// ======================
setInterval(() => {
    if(orders.some(order => !order.synced)) {
        console.log('ğŸ”„ Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î¿Ï‚ ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼ÏŒÏ‚ Î»ÏŒÎ³Ï‰ Î¼Î· ÏƒÏ…Î³Ï‡ÏÎ¿Î½Î¹ÏƒÎ¼Î­Î½Ï‰Î½ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¹ÏÎ½');
        uploadToGoogleSheets();
    }
}, 300000); // 5 Î»ÎµÏ€Ï„Î¬

// Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
setInterval(() => {
    localStorage.setItem('orders', JSON.stringify(orders));
    localStorage.setItem('customers', JSON.stringify(customers));
}, 30000); // 30 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
</script>
</body>
</html>
